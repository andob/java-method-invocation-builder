<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Java-method-invocation-builder : Creates builders that enables code to cleanly invoke dirty methods.">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Java-method-invocation-builder</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/tomasbjerre/java-method-invocation-builder">View on GitHub</a>

          <h1 id="project_title">Java-method-invocation-builder</h1>
          <h2 id="project_tagline">Creates builders that enables code to cleanly invoke dirty methods.</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/tomasbjerre/java-method-invocation-builder/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/tomasbjerre/java-method-invocation-builder/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a id="java-method-invocation-builder--" class="anchor" href="#java-method-invocation-builder--" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Java Method Invocation Builder <a href="https://travis-ci.org/tomasbjerre/java-method-invocation-builder"><img src="https://travis-ci.org/tomasbjerre/java-method-invocation-builder.svg?branch=master" alt="Build Status"></a> <a href="https://maven-badges.herokuapp.com/maven-central/se.bjurr.jmib/java-method-invocation-builder"><img src="https://maven-badges.herokuapp.com/maven-central/se.bjurr.jmib/java-method-invocation-builder/badge.svg" alt="Maven Central"></a>
</h1>

<p>This is a Java library that enables builders, for invoking methods on instantiated objects, to be generated.</p>

<p>Sometimes you are forced to invoke methods that take alot of parameters. This makes the invoking code dirty and hard to read. The problem may be solved with a builder. The builder can have default values for each parameter and when you want to call the method, you just supply the parameters you want to change. This library automates the creation of such builders.</p>

<p>There are some example builders generated <a href="https://github.com/tomasbjerre/java-method-invocation-builder/tree/master/src/test/expected/se/bjurr/jmib/testcases">here</a>.</p>

<p>There is a Gradle example <a href="https://github.com/tomasbjerre/java-method-invocation-builder/tree/master/example-gradle">here</a>.</p>

<p>There is a Maven example <a href="https://github.com/tomasbjerre/java-method-invocation-builder/tree/master/example-maven">here</a>.</p>

<h2>
<a id="examples" class="anchor" href="#examples" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Examples</h2>

<p>Here are 2 examples. One is simple with a concrete class. The other one is the original use case with a REST API client.</p>

<h3>
<a id="concrete-class" class="anchor" href="#concrete-class" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Concrete class</h3>

<p>If you have a class annotated with <code>@GenerateMethodInvocationBuilder</code> like this:</p>

<pre><code>@GenerateMethodInvocationBuilder
public class ClassWithConstructor {
 private final Integer age;

 public ClassWithConstructor(String name, Integer age) {
  this.age = age;
 }

 public Integer getAgeAfter(@Default("5") Integer years) {
  return this.age + years;
 }
}
</code></pre>

<p>A builder will be generated so that you can do this:</p>

<pre><code> ClassWithConstructor instance = new ClassWithConstructor("name", 5);
 Integer ageAfter = ClassWithConstructorGetAgeAfterBuilder.getAgeAfter()//
  .invoke(instance);
 assertThat(ageAfter)//
  .isEqualTo(10);
</code></pre>

<p>Or avoid using the default value of years:</p>

<pre><code> ClassWithConstructor instance = new ClassWithConstructor("name", 5);
 Integer ageAfter = ClassWithConstructorGetAgeAfterBuilder.getAgeAfter()//
  .withYears(2)//
  .invoke(instance);
 assertThat(ageAfter)//
  .isEqualTo(7);
</code></pre>

<h3>
<a id="rest-api-client-with-interface" class="anchor" href="#rest-api-client-with-interface" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>REST API client with interface</h3>

<p>This is the original use case that triggered me to start working with this project.</p>

<p>I am using <a href="http://square.github.io/retrofit/">Retrofit</a> to create a client for BitBucket Server. Here is the interface that specifies the <em>pullrequests</em> REST resource.</p>

<pre><code>public interface BitBucketServerService {
 @GET("/rest/api/1.0/projects/{projectkey}/repos/{repositoryslug}/pull-requests?direction={direction}&amp;at={at}&amp;state={state}&amp;order={order}&amp;withattributes={withattributes}&amp;withproperties={withproperties}")
 Call&lt;BitbucketServerResponse&lt;BitBucketServerPullRequest&gt;&gt; pullRequests(//
   @Query("projectkey") String projectKey,//
   @Query("repositoryslug") String repositoryslug,//
   @Query("direction") String direction,//
   @Query("at") Integer at,//
   @Query("state") String state,//
   @Query("order") String order,//
   @Query("withattributes") String withattributes,//
   @Query("withproperties") String withproperties);
}
</code></pre>

<p>When invoking that method without this library it would look something like this.</p>

<pre><code>bitBucketServerService.pullRequests("PROJ","REPO","INCOMING","23","OPEN","NEWEST","true","true");
bitBucketServerService.pullRequests("PROJ","REPO","INCOMING","24","OPEN","NEWEST","true","true");
bitBucketServerService.pullRequests("PROJ","REPO","INCOMING","25","OPEN","NEWEST","true","true");
</code></pre>

<p>This library provides the <code>@GenerateMethodInvocationBuilder</code> annotation that can be added to a type like this.</p>

<pre><code>@GenerateMethodInvocationBuilder
public interface BitBucketServerService {
 @GET("/rest/api/1.0/projects/{projectkey}/repos/{repositoryslug}/pull-requests?direction={direction}&amp;at={at}&amp;state={state}&amp;order={order}&amp;withattributes={withattributes}&amp;withproperties={withproperties}")
 Call&lt;BitbucketServerResponse&lt;BitBucketServerPullRequest&gt;&gt; pullRequests(//
   @Default("PROJ") @Query("projectkey") String projectKey,//
   @Default("REPO") @Query("repositoryslug") String repositoryslug,//
   @Default("INCOMING") @Query("direction") String direction,//
   @Default("23") @Query("at") String at,//
   @Default("OPEN") @Query("state") String state,//
   @Default("NEWEST") @Query("order") String order,//
   @Default("true") @Query("withattributes") String withattributes,//
   @Default("true") @Query("withproperties") String withproperties);
}
</code></pre>

<p>A builder is automatically generated and we can do.</p>

<pre><code>BitBucketServerServicePullRequestsBuilder.pullRequests()
 .invoke(bitBucketServerService);

BitBucketServerServicePullRequestsBuilder.pullRequests()
 .withAt("24")
 .invoke(bitBucketServerService);

BitBucketServerServicePullRequestsBuilder.pullRequests()
 .withAt("25")
 .invoke(bitBucketServerService);
</code></pre>

<h2>
<a id="developer-instructions" class="anchor" href="#developer-instructions" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Developer instructions</h2>

<p>To build the code, have a look at <code>.travis.yml</code>.</p>

<p>To do a release you need to do <code>./gradlew release</code> and release the artifact from <a href="https://oss.sonatype.org/#stagingRepositories">staging</a>. More information <a href="http://central.sonatype.org/pages/releasing-the-deployment.html">here</a>.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Java-method-invocation-builder maintained by <a href="https://github.com/tomasbjerre">tomasbjerre</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
